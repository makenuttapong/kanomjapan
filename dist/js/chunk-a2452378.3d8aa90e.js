(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2452378"],{"30b0":function(t,e,a){"use strict";a("5a74")},3460:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-card",{staticClass:"overflow-hidden"},[s("h5",{staticClass:"mb-4"},[s("i",{staticClass:"fas fa-dollar-sign",attrs:{color:"#7367f0"}}),t._v(" รายรับ-รายจ่าย ")]),s("div",{staticClass:"mb-3 mx-2"},[s("b-row",[s("b-col",{staticClass:"d-flex align-items-center justify-content-start mb-1",attrs:{cols:"12",lg:"3",md:"6"}},[s("label",[t._v("แสดง")]),s("b-select",{staticClass:"\n              per-page-selector\n              d-inline-block\n              mx-50\n              select-per-page\n              ml-2\n              mr-2\n            ",attrs:{options:t.perPageOptions,clearable:!1},on:{change:t.changeItemPerPage},model:{value:t.itemPerPage,callback:function(e){t.itemPerPage=e},expression:"itemPerPage"}}),s("label",[t._v("รายการ")])],1),s("b-col",{staticClass:"d-none d-md-inline",attrs:{cols:"12",lg:"3",md:"6"}},[s("div",{staticClass:"d-flex align-items-center justify-content-end mb-1"},[s("label",[t._v("สถานะ")]),s("b-select",{staticClass:"per-page-selector d-inline-block mx-50 ml-2 mr-2",attrs:{options:t.filterStatus,clearable:!1},on:{change:t.changeStatus},model:{value:t.statusFilter,callback:function(e){t.statusFilter=e},expression:"statusFilter"}})],1)]),s("b-col",{staticClass:"d-md-none",attrs:{cols:"12",lg:"6",md:"6"}},[s("div",{staticClass:"mb-3  text-right custom-filters"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-filter",expression:"'collapse-filter'"}],staticClass:"collapse-icon",attrs:{size:"sm",variant:"outline-info"}},[t._v("ฟิลเตอร์ "),s("div",{staticClass:"col-1 icon-coll d-inline"},[s("i",{staticClass:"fa fa-chevron-up icon-coll-open-filter"})])])],1),s("b-collapse",{attrs:{id:"collapse-filter"}},[s("div",{staticClass:"d-flex align-items-center justify-content-end mb-1"},[s("label",[t._v("สถานะ")]),s("b-select",{staticClass:"per-page-selector d-inline-block mx-50 ml-2 mr-2",attrs:{options:t.filterStatus,clearable:!1},on:{change:t.changeStatus},model:{value:t.statusFilter,callback:function(e){t.statusFilter=e},expression:"statusFilter"}})],1)])],1)],1)],1),t.loading?s("div",{staticClass:"p-5"},[s("vcl-table")],1):t._e(),t.loading?t._e():s("div",[s("b-card-body",[0!=this.incomes.length?s("div",{staticClass:"text-mute mb-2"},[t._v(" รายการที่ "+t._s(t.itemStart)+" - "+t._s(t.itemEnd)+" จาก "+t._s(t.totalDatas)+" ")]):t._e(),s("b-table",{attrs:{items:t.incomes,fields:t.fields,hover:!0,responsive:"","show-empty":"","empty-text":"ไม่พบข้อมูล","empty-filtered-text":"ไม่พบข้อมูล","tbody-tr-class":"tableHover"},scopedSlots:t._u([{key:"cell(profile)",fn:function(e){return[s("div",{staticClass:"name-width"},[s("b-avatar",{attrs:{size:"32",src:e.item.userProfile.image?e.item.userProfile.image:a("5651")}}),s("span",[t._v(" "+t._s("admin"!=e.item.userProfile.role?e.item.userProfile.name?e.item.userProfile.name:"":"ADMIN"))])],1)]}},{key:"cell(orderID)",fn:function(e){return[s("div",{staticClass:"orderId-width color-primary"},[s("HashIcon",{staticClass:"mb-1",attrs:{size:"15"}}),t._v(t._s(e.item.orderID)+" ")],1)]}},{key:"cell(price)",fn:function(e){return[s("div",{staticClass:"priceIncome-width",class:"cash-in"==e.item.status?"cashIn-price":"cashOut-price"},[t._v(" "+t._s("cash-in"==e.item.status?"+":"-")+t._s(t.formatPrice(e.item.price))+" บาท ")])]}},{key:"cell(createAt)",fn:function(e){return[s("div",{staticClass:"time-width text-small"},[t._v(" "+t._s(t.formatDate(e.item.createAt))+" ")])]}}],null,!1,132045909)})],1),0!=this.incomes.length?s("div",{staticClass:"mx-2"},[s("b-row",[s("b-col",{staticClass:"\n              d-flex\n              align-items-center\n              justify-content-center justify-content-sm-start\n            ",attrs:{cols:"12",sm:"6"}},[s("span",{staticClass:"text-mute total-data"},[t._v("รายการที่ "+t._s(t.itemStart)+" - "+t._s(t.itemEnd)+" จาก "+t._s(t.totalDatas))])]),s("b-col",{staticClass:"\n              d-flex\n              align-items-center\n              justify-content-center justify-content-sm-end\n            ",attrs:{cols:"12",sm:"6"}},[s("Pagination",{attrs:{currentPage:this.$store.state.currentP+1,totalItem:t.totalDatas,itemPerPage:t.itemPerPage,start:t.itemStart,end:t.itemEnd},on:{selectedPage:t.loadMore}})],1)],1)],1):t._e()],1)])],1)},i=[],r=a("6407"),l=a("c1df"),n=a.n(l),o=a("28f7"),c=a("68ee"),m=a("0a35"),d={name:"IncomeList",components:{Pagination:r["a"],VclTable:c["VclTable"],HashIcon:m["h"]},data(){return{loading:!1,incomes:[],itemss:[],fields:[{key:"profile",sortable:!0},{key:"orderID",sortable:!0},{key:"description",sortable:!0},{key:"price",sortable:!0},{key:"createAt",sortable:!0}],statusFilter:"ทั้งหมด",filterStatus:["ทั้งหมด","รายรับ","รายจ่าย"],perPageOptions:["25","50","75"],totalDatas:null,itemPerPage:25,itemStart:null,itemEnd:null}},created(){this.loadIncome()},methods:{loadIncome(){this.loading=!0;let t=this.itemPerPage*this.$store.state.currentP;const e=o["a"].firestore().collection("incomes");var a;return"ทั้งหมด"!=this.statusFilter?"รายรับ"==this.statusFilter?a=e.where("status","==","cash-in").orderBy("createAt","desc"):"รายจ่าย"==this.statusFilter&&(a=e.where("status","==","cash-out").orderBy("createAt","desc")):a=e.orderBy("createAt","desc"),a.get().then(e=>{let s=e.docs[t];var i=e.docs.length,r=this.$store.state.currentP+1,l=r*this.itemPerPage-(this.itemPerPage-1),n=Math.min(l+this.itemPerPage-1,i);if(this.itemStart=l,this.itemEnd=n,this.totalDatas=i,s)var o=a.startAt(s).limit(this.itemPerPage);else o=a.limit(this.itemPerPage);o.get().then(t=>{var e=[];t.forEach(t=>{var a={uid:t.id,createAt:t.data().createAt,description:t.data().description,orderID:t.data().orderID,price:t.data().price,status:t.data().status,userProfile:t.data().userProfile};e.push(a)}),this.incomes=e,this.loading=!1}).catch(t=>{this.loading=!1,console.error(t)})}).catch(t=>{this.loading=!1,console.error(t)})},formatDate(t){var e=t.toDate(),a=n()(e).format("DD-MM-YYYY HH:mm");return a},formatPrice(t){let e=(t/1).toFixed(0);return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},loadMore(t){this.$store.dispatch("changePage",t),this.loadIncome()},changeItemPerPage(t){this.itemPerPage=t,this.loadIncome()},changeStatus(t){this.statusFilter=t,this.loadIncome()}}},u=d,g=(a("eb66"),a("2877")),h=Object(g["a"])(u,s,i,!1,null,"0a267f7e",null);e["default"]=h.exports},5651:function(t,e,a){t.exports=a.p+"img/userDF.d961d73a.png"},"5a74":function(t,e,a){},6407:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overflow-auto"},[a("div",{staticClass:"pagination-item"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},on:{input:function(e){return t.updatePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])},i=[],r={name:"Pagination",props:["currentPage","totalItem","itemPerPage","start","end"],data(){return{perPage:this.itemPerPage}},methods:{updatePage(t){this.$emit("selectedPage",t-1)}},computed:{rows(){return this.totalItem}}},l=r,n=(a("30b0"),a("2877")),o=Object(n["a"])(l,s,i,!1,null,"62654af7",null);e["a"]=o.exports},c601:function(t,e,a){},eb66:function(t,e,a){"use strict";a("c601")}}]);
//# sourceMappingURL=chunk-a2452378.3d8aa90e.js.map