(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c58ee17"],{"30b0":function(t,e,a){"use strict";a("5a74")},"47e0":function(t,e,a){t.exports=a.p+"img/review-none.b0168bea.svg"},"502d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pb-4"},[a("div",{staticClass:"d-flex space-between"},[a("div",{staticClass:"mt-2"},[t._v("บทความรีวิวทั้งหมด")]),a("div",{staticClass:"d-none d-sm-inline"},[a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.searchReview(e)}}},[a("b-input-group",{staticClass:"input-group-merge pr-2"},[a("b-form-input",{staticClass:"d-inline-block",attrs:{placeholder:"ค้นหาบทความรีวิว"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("b-input-group-append",{staticClass:"pointer",attrs:{"is-text":""},on:{click:t.searchReview}},[a("i",{staticClass:"fas fa-search"})])],1)],1)],1)])]),a("hr"),t.loading?a("div",{staticClass:"row p-3"},[a("vue-content-loading",{attrs:{width:300,height:80}},[a("rect",{attrs:{x:"0",y:"0",rx:"0",ry:"0",width:"70",height:"70"}}),a("rect",{attrs:{x:"75",y:"0",rx:"0",ry:"0",width:"70",height:"70"}}),a("rect",{attrs:{x:"150",y:"0",rx:"0",ry:"0",width:"70",height:"70"}}),a("rect",{attrs:{x:"225",y:"0",rx:"0",ry:"0",width:"70",height:"70"}})])],1):t._e(),t.loading?t._e():a("div",{staticClass:"card-loop-set"},[0!=t.dataList.length?a("b-row",{staticClass:"match-height"},t._l(t.dataList,(function(e,s){return a("CardReview",{key:s,attrs:{datas:e},on:{toDetailPage:t.detailPage}})})),1):t._e(),0==t.dataList.length?a("div",{staticClass:"text-center pt-4"},[a("div",{staticClass:"pt-4 pb-4 h5"},[t._v("ไม่พบบทความรีวิวสินค้า")]),t._m(0)]):t._e(),0!=t.dataList.length?a("div",{staticClass:"text-mute"},[t._v(" บทความที่ "+t._s(t.itemStart)+" - "+t._s(t.itemEnd)+" จาก "+t._s(t.totalDatas)+" ")]):t._e(),0!=t.dataList.length?a("div",[a("Pagination",{attrs:{currentPage:this.$store.state.currentP+1,totalItem:t.totalDatas,itemPerPage:t.itemPerPage,start:t.itemStart,end:t.itemEnd},on:{selectedPage:t.loadMore}})],1):t._e()],1)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("img",{attrs:{src:a("47e0"),width:"300px"}})])}],r=a("28f7"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{attrs:{lg:"3",md:"4",sm:"6"}},[a("b-card",{staticClass:"mb-4"},[a("div",{staticClass:"img-hover-zoom"},[a("img",{staticClass:"full-imge",attrs:{src:t.datas.image},on:{click:t.toDetailPage}})]),a("div",{staticClass:"text-title-card"},[a("span",{staticClass:"link-detail",on:{click:t.toDetailPage}},[t._v(t._s(t.datas.title))])]),a("div",{staticClass:"mb-3"},[a("div",{staticClass:"text-date"},[a("CalendarIcon",{staticClass:"mb-1 mr-1",attrs:{size:"18"}}),t._v(" "+t._s(t.datas.createAt)+" ")],1)])])],1)},c=[],o=(a("78a7"),a("0a35")),l={name:"CardReview",props:["datas"],components:{CalendarIcon:o["c"]},methods:{toDetailPage(){this.$emit("toDetailPage",this.datas)}}},d=l,u=(a("b587"),a("2877")),h=Object(u["a"])(d,n,c,!1,null,"e47a4ff2",null),g=h.exports,m=a("6407"),v=a("68ee"),p=a("c1df"),P=a.n(p),f={name:"reviews",computed:{currentP(){return this.$store.state.currentP}},data(){return{dataList:[],loading:!1,totalDatas:null,itemPerPage:12,itemStart:null,itemEnd:null,searchQuery:""}},components:{CardReview:g,VueContentLoading:v["VueContentLoading"],Pagination:m["a"]},created(){this.loadReviews()},methods:{loadReviews(){this.loading=!0;let t=this.itemPerPage*this.$store.state.currentP;var e;return e=""!=this.searchQuery?r["a"].firestore().collection("productReview").where("status","==",!0).where("title",">=",this.searchQuery).where("title","<=",this.searchQuery+""):r["a"].firestore().collection("productReview").where("status","==",!0).orderBy("createAt","desc"),e.get().then(a=>{let s=a.docs[t];var i=a.docs.length,r=this.$store.state.currentP+1,n=r*this.itemPerPage-(this.itemPerPage-1),c=Math.min(n+this.itemPerPage-1,i);if(this.itemStart=n,this.itemEnd=c,this.totalDatas=i,s)var o=e.startAt(s).limit(this.itemPerPage);else o=e.limit(this.itemPerPage);o.get().then(t=>{var e=[];t.forEach(t=>{var a={id:t.id,title:t.data().title,image:t.data().image,status:t.data().status,createAt:t.data().createAt?this.formatDate(t.data().createAt):""};t.data().status&&e.push(a)}),this.dataList=e,this.loading=!1}).catch(t=>{console.log(t),this.loading=!1})}).catch(t=>{console.log(t),this.loading=!1})},formatDate(t){var e=t.toDate(),a=P()(e).format("DD-MM-YYYY");return a},detailPage(t){this.$router.push("/reviews-detail/"+t.id)},loadMore(t){this.$store.dispatch("changePage",t),this.loadReviews()},searchReview(){this.loadReviews()}}},w=f,C=(a("ad2e"),Object(u["a"])(w,s,i,!1,null,"637aefcf",null));e["default"]=C.exports},"5a74":function(t,e,a){},6407:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overflow-auto"},[a("div",{staticClass:"pagination-item"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},on:{input:function(e){return t.updatePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])},i=[],r={name:"Pagination",props:["currentPage","totalItem","itemPerPage","start","end"],data(){return{perPage:this.itemPerPage}},methods:{updatePage(t){this.$emit("selectedPage",t-1)}},computed:{rows(){return this.totalItem}}},n=r,c=(a("30b0"),a("2877")),o=Object(c["a"])(n,s,i,!1,null,"62654af7",null);e["a"]=o.exports},"7d3a":function(t,e,a){},ad2e:function(t,e,a){"use strict";a("cacd")},b587:function(t,e,a){"use strict";a("7d3a")},cacd:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4c58ee17.c573422a.js.map