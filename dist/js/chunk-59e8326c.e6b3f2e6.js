(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59e8326c"],{"24d9":function(t,s,e){},"4a52":function(t,s,e){},"7a4f":function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"expandable-image",class:{expanded:t.expanded},on:{click:function(s){t.expanded=!0}}},[t.expanded?e("i",{staticClass:"close-button",on:{click:function(s){t.expanded=!1}}},[e("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:"#666666",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}})])]):e("i",{staticClass:"expand-button"},[e("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:"#000000",d:"M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z"}})])]),e("img",t._b({},"img",t.$attrs,!1))])},i=[],r={inheritAttrs:!1,name:"ExpandableImage",data(){return{expanded:!1}},methods:{closeImage(t){this.expanded=!1,t.stopPropagation()},freezeVp(t){t.preventDefault()}},watch:{expanded(t){this.$nextTick(()=>{t?(this.cloned=this.$el.cloneNode(!0),this.closeButtonRef=this.cloned.querySelector(".close-button"),this.closeButtonRef.addEventListener("click",this.closeImage),document.body.appendChild(this.cloned),document.body.style.overflow="hidden",setTimeout(()=>{this.cloned.style.opacity=1},0)):(this.cloned.style.opacity=0,setTimeout(()=>{this.closeButtonRef.removeEventListener("click",this.closeImage),this.cloned.remove(),this.cloned=null,this.closeButtonRef=null,document.body.style.overflow="auto"},250))})}}},l=r,o=(e("8b40"),e("2877")),d=Object(o["a"])(l,a,i,!1,null,null,null);s["a"]=d.exports},"7b40":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{lg:"8",md:"12"}},[e("b-card",{staticClass:"mb-4 overflow-hidden"},[t.loading?e("div",{staticClass:"p-4"},[e("vcl-list")],1):t._e(),t.loading?t._e():e("div",[e("div",{staticClass:"mb-3 d-flex space-between"},[e("h5",[e("FileTextIcon",{staticClass:"mb-1",attrs:{color:"#7367f0"}}),t._v(" หมายเลขคำสั่งซื้อ : "),e("span",[t._v(" "+t._s(t.orderItem.orderID)+" ")])],1),"รอชำระ"==t.orderItem.status?e("div",{staticClass:"d-inline pl-3"},[e("b-button",{attrs:{variant:"outline-primary",size:"sm"},on:{click:t.toggleModal}},[t._v("ยกเลิกคำสั่งซื้อ")])],1):t._e()]),t.loading?t._e():e("div",{staticClass:"detail-user-order"},[e("div",{staticClass:"mb-2"},[e("span",{staticClass:"bold"},[t._v("จำนวนสินค้า : ")]),t._v(" "+t._s(t.orderItem.orderList.length)+" รายการ ")]),e("b-table",{attrs:{responsive:"sm",items:t.orderItem.orderList,"show-empty":"",fields:t.fields,"empty-text":"ไม่พบข้อมูล","empty-filtered-text":"ไม่พบข้อมูล","tbody-tr-class":"tableHover"},scopedSlots:t._u([{key:"cell(image)",fn:function(t){return[e("ExpandableImage",{staticClass:"sm-image",attrs:{src:t.item.image}})]}},{key:"cell(name)",fn:function(s){return[e("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"pro-name-detail",attrs:{title:s.item.name}},[t._v(" "+t._s(s.item.name)+" ")]),e("div",{staticClass:"color-primary font-14"},[t._v(" "+t._s(s.item.productID)+" ")])]}},{key:"cell(price)",fn:function(s){return[s.item.discount?t._e():e("div",{staticClass:"price-width"},[e("div",[t._v(t._s(s.item.price)+" บาท")])]),s.item.discount?e("div",{staticClass:"price-width"},[e("div",{staticClass:"font-dis"},[t._v(t._s(s.item.fullprice)+" บาท")]),e("div",[t._v(t._s(s.item.price)+" บาท")])]):t._e()]}},{key:"cell(quantity)",fn:function(s){return[e("span",[t._v(" "+t._s(s.item.quantity)+" ชิ้น")])]}},{key:"cell(total)",fn:function(s){return[e("div",{staticClass:"total-detail"},[t._v(t._s(s.item.total)+" บาท")])]}}],null,!1,1880852439)}),e("div",[e("span",{staticClass:"bold"},[t._v("ราคาสินค้ารวม : ")]),t._v(" "+t._s(t.formatPrice(t.orderItem.totalPrice))+" บาท ")]),e("div",[e("span",{staticClass:"bold"},[t._v("ค่าส่ง : ")]),t._v(" "+t._s(0!=t.orderItem.deliverPrice?t.orderItem.deliverPrice+" บาท":"ส่งฟรี")+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("รวมทั้งหมด : ")]),t._v(" "+t._s(t.formatPrice(t.orderItem.totalAll))+" บาท ")])],1)])])],1),e("b-col",{attrs:{lg:"4",md:"12"}},[e("b-row",{staticClass:"match-height order"},[e("b-col",{attrs:{lg:"12",md:"6"}},[e("b-card",{staticClass:"card-right mb-4"},[t.loading?e("div",{staticClass:"p-2"},[e("vcl-list")],1):t._e(),t.loading?t._e():e("div",[e("h5",{staticClass:"mb-3"},[e("PackageIcon",{staticClass:"mb-1",attrs:{color:"#7367f0"}}),t._v(" สถานะคำสั่งซื้อ ")],1),"รอชำระ"==t.orderItem.status?e("div",{staticClass:"d-inline"},[e("b-badge",{staticClass:"status-wait-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-clock"}),t._v(" "+t._s(t.orderItem.status))])],1):t._e(),"รอการตรวจสอบ"==t.orderItem.status?e("div",{staticClass:"d-inline"},[e("b-badge",{staticClass:"status-checkSlip-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-search-dollar"}),t._v(" "+t._s(t.orderItem.status))])],1):t._e(),"เตรียมจัดส่ง"==t.orderItem.status?e("div",{staticClass:"d-inline"},[e("b-badge",{staticClass:"status-ready-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-truck-loading"}),t._v(" "+t._s(t.orderItem.status))])],1):t._e(),"อยู่ระหว่างการจัดส่ง"==t.orderItem.status?e("div",{staticClass:"d-inline"},[e("b-badge",{staticClass:"status-sent-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-shipping-fast"}),t._v(" "+t._s(t.orderItem.status))])],1):t._e(),"จัดส่งแล้ว"==t.orderItem.status?e("div",{staticClass:"d-inline"},[e("b-badge",{staticClass:"status-check-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-check"}),t._v(" "+t._s(t.orderItem.status))])],1):t._e(),"ยกเลิก"==t.orderItem.status?e("div",{staticClass:"d-inline"},[e("b-badge",{staticClass:"status-cancle-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.orderItem.status))])],1):t._e(),"รอชำระ"==t.orderItem.status?e("div",{staticClass:"d-inline pl-3"},[e("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.confirmPage}},[t._v("ชำระสินค้า")])],1):t._e(),e("div",{staticClass:"mt-3"},[e("span",{staticClass:"bold"},[t._v("สั่งซื้อเมื่อ : "),e("CalendarIcon",{staticClass:"mr-1 mb-1",attrs:{size:"18"}})],1),e("span",{staticClass:"font-14"},[t._v(t._s(t.orderItem.createAt?t.orderItem.createAt:"-"))])]),e("div",{},[e("span",{staticClass:"bold"},[t._v("อัปเดตเมื่อ : "),e("CalendarIcon",{staticClass:"mr-1 mb-1",attrs:{size:"18"}})],1),e("span",{staticClass:"font-14"},[t._v(t._s(t.orderItem.updateAt?t.orderItem.updateAt:"-"))])])])])],1),e("b-col",{attrs:{lg:"12",md:"6"}},[e("b-card",{staticClass:"mb-4"},[t.loading?e("div",{staticClass:"p-2"},[e("vcl-list")],1):t._e(),t.loading?t._e():e("div",[e("h5",{staticClass:"mb-3"},[e("TruckIcon",{staticClass:"mb-1",attrs:{color:"#7367f0"}}),t._v(" หมายเลขติดตามพัสดุ ")],1),e("div",{staticClass:"mb-2"},[e("span",{staticClass:"bold"},[t._v("บริษัทขนส่ง : ")]),t._v(" "+t._s(t.orderItem.deliverCompany)+" ")]),e("div",{staticClass:"d-inline"},[e("span",{staticClass:"bold"},[t._v("เลขพัสดุ : ")]),t.orderItem.deliverNumber?e("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.orderItem.deliverNumber,expression:"orderItem.deliverNumber",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"link-detail"},[t._v(" "+t._s(t.orderItem.deliverNumber)+" ")]):t._e(),t.orderItem.deliverNumber?t._e():e("span",[t._v(" - ")])]),t.orderItem.deliverNumber?e("div",{staticClass:"mt-3 text-center"},[e("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.followTruck}},[t._v("ติดตามพัสดุ")])],1):t._e()])])],1)],1)],1)],1),e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{lg:"6",md:"6"}},[e("b-card",{staticClass:"mb-4"},[t.loading?e("div",{staticClass:"p-2"},[e("vcl-list")],1):t._e(),t.loading?t._e():e("div",[e("h5",{staticClass:"mb-3"},[e("HomeIcon",{staticClass:"mb-1",attrs:{color:"#7367f0"}}),t._v(" ที่อยู่ในการจัดส่ง ")],1),e("div",[e("div",[e("span",{staticClass:"bold"},[t._v("ชื่อผู้รับ : ")]),t._v(" "+t._s(t.orderItem.address.name)+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("โทรศัพท์ : ")]),t._v(" "+t._s(t.orderItem.address.phone)+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("บ้านเลขที่ : ")]),t._v(" "+t._s(t.orderItem.address.houseNumber)+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("ซอย : ")]),t._v(" "+t._s(t.orderItem.address.soy?t.orderItem.address.soy:"-")+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("ถนน : ")]),t._v(" "+t._s(t.orderItem.address.road?t.orderItem.address.road:"-")+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("ตำบล/แขวง : ")]),t._v(" "+t._s(t.orderItem.address.district)+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("อำเภอ/เขต : ")]),t._v(" "+t._s(t.orderItem.address.amphoe)+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("จังหวัด : ")]),t._v(" "+t._s(t.orderItem.address.province)+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("รหัสไปรษณี : ")]),t._v(" "+t._s(t.orderItem.address.zipcode)+" ")])])])])],1),e("b-col",{attrs:{lg:"6",md:"6"}},[e("b-card",{staticClass:"mb-4"},[t.loading?e("div",{staticClass:"p-2"},[e("vcl-list")],1):t._e(),t.loading?t._e():e("div",[e("h5",{staticClass:"mb-3"},[e("PaperclipIcon",{staticClass:"mb-1",attrs:{color:"#7367f0"}}),t._v(" หลักฐานการชำระ ")],1),e("div",[e("span",{staticClass:"bold"},[t._v("สถานะ : ")]),t.orderItem.payon?e("b-badge",{staticClass:"status-check-style font-14",attrs:{pill:""}},[t._v(" ชำระแล้ว ")]):t._e(),t.orderItem.payon?t._e():e("b-badge",{staticClass:"status-cancle-style font-14",attrs:{pill:""}},[t._v(" ยังไม่ได้ชำระ ")])],1),e("div",[e("span",{staticClass:"bold"},[t._v("ยืนยันการชำระเมื่อ : "),e("CalendarIcon",{staticClass:"mr-1 mb-1",attrs:{size:"18"}})],1),e("span",{staticClass:"font-14"},[t._v(t._s(t.orderItem.payon?t.orderItem.payon:"-"))])]),e("div",[e("span",{staticClass:"bold"},[t._v("โอนจากธนาคาร : ")]),t._v(t._s(t.orderItem.formBank?t.orderItem.formBank:"-")+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("วัน-เวลาที่โอน : "),e("CalendarIcon",{staticClass:"mr-1 mb-1",attrs:{size:"18"}})],1),e("span",{staticClass:"font-14"},[t._v(t._s(t.orderItem.slipDate))])]),e("div",{staticClass:"mb-3"},[e("span",{staticClass:"bold"},[t._v("สลิปโอนเงิน : "+t._s(t.orderItem.slipImage?"":"-"))])]),t.orderItem.slipImage?e("div",{staticClass:"d-flex justify-content-center mb-3"},[e("ExpandableImage",{staticClass:"ex-image",attrs:{src:t.orderItem.slipImage}})],1):t._e()])])],1)],1),e("b-modal",{attrs:{id:"modal-delete","hide-footer":"",size:"md",title:"ยกเลิกออเดอร์"}},[[e("div",{staticClass:"center"},[t._v("แน่ใจหรือว่าต้องการยกเลิกออเดอร์นี้ ?")]),e("div",{staticClass:"btn-delete text-center mt-2"},[e("b-row",[e("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"12"}},[e("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:t.cancleOrder}},[t._v("ยืนยัน")]),e("b-button",{attrs:{variant:"outline-primary"},on:{click:t.toggleModalDelete}},[t._v("ยกเลิก")])],1)],1)],1)]],2)],1)},i=[],r=e("28f7"),l=e("68ee"),o=e("7a4f"),d=e("c1df"),c=e.n(d),n=(e("78a7"),e("0a35")),m={name:"OrderListDetail",components:{VclList:l["VclList"],FileTextIcon:n["g"],CalendarIcon:n["c"],HomeIcon:n["i"],TruckIcon:n["s"],PaperclipIcon:n["l"],PackageIcon:n["k"],ExpandableImage:o["a"]},data(){return{orderItem:[],loading:!1,idOrder:this.$route.params.id,fields:[{key:"image"},{key:"name",sortable:!0},{key:"price",sortable:!0},{key:"quantity",sortable:!0},{key:"total",sortable:!0}]}},created(){window.scrollTo(0,0),this.loadorder()},methods:{loadorder(){this.loading=!0;const t=r["a"].firestore().doc("orders/"+this.idOrder);t.get().then(t=>{var s=t.data().items,e=[];s.map(t=>{var s={image:t.image,name:t.name,productID:t.productID,price:this.formatPrice(t.price),fullprice:t.fullprice,discount:t.discount,quantity:t.quantity,total:this.formatPrice(t.price*t.quantity)};e.push(s)});var a={id:t.id,orderID:t.data().orderID,status:t.data().status,orderList:e,totalPrice:t.data().totalPrice,totalAll:t.data().totalAll,deliverPrice:t.data().deliverPrice,note:t.data().note,paywith:t.data().paywith,slipImage:t.data().slipImage,slipDate:t.data().slipDate,formBank:t.data().formBank,address:t.data().address,payon:t.data().payon?this.formatDate(t.data().payon):"",deliverNumber:t.data().deliverNumber,deliverCompany:t.data().deliverCompany,createAt:t.data().createAt?this.formatDate(t.data().createAt):"",updateAt:t.data().updateAt?this.formatDate(t.data().updateAt):""};this.orderItem=a,this.loading=!1}).catch(t=>{console.log(t),this.$router.replace("/error"),this.loading=!1})},confirmPage(){this.$router.push("/confirm-order/"+this.idOrder)},formatDate(t){var s=t.toDate(),e=c()(s).format("DD-MM-YYYY HH:mm");return e},formatPrice(t){let s=(t/1).toFixed(0);return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},followTruck(){"KerryExpress"==this.orderItem.deliverCompany?window.open("https://th.kerryexpress.com/th/track/","_blank"):"ThailandPost"==this.orderItem.deliverCompany?window.open("https://track.thailandpost.co.th/","_blank"):"FlashExpress"==this.orderItem.deliverCompany?window.open("https://www.flashexpress.co.th/tracking/","_blank"):"J&TExpress"==this.orderItem.deliverCompany&&window.open("https://www.jtexpress.co.th/index/query/gzquery.html","_blank")},toggleModal(){this.$bvModal.show("modal-delete")},toggleModalDelete(){this.$bvModal.hide("modal-delete")},cancleOrder(){this.loading=!0,this.toggleModalDelete();var t={status:"ยกเลิก",updateAt:new Date};const s=r["a"].firestore().doc("orders/"+this.orderItem.id);return s.update(t).then(()=>{this.loading=!1,this.loadorder()}).catch(t=>{console.log(t),this.loading=!1})},onCopy:function(t){console.log(t.text),this.$toast("คัดลอกแล้ว",{position:"top-center",closeOnClick:!0,hideProgressBar:!0,timeout:1500,icon:"fas fa-copy"})}}},v=m,p=(e("b272"),e("2877")),u=Object(p["a"])(v,a,i,!1,null,null,null);s["default"]=u.exports},"8b40":function(t,s,e){"use strict";e("24d9")},b272:function(t,s,e){"use strict";e("4a52")}}]);
//# sourceMappingURL=chunk-59e8326c.e6b3f2e6.js.map