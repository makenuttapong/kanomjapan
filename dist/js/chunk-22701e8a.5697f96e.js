(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22701e8a"],{"0fda":function(t,s,a){t.exports=a.p+"img/Empty.cfb49f55.svg"},"24d9":function(t,s,a){},"30b0":function(t,s,a){"use strict";a("5a74")},5651:function(t,s,a){t.exports=a.p+"img/userDF.d961d73a.png"},"5a74":function(t,s,a){},6407:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"overflow-auto"},[a("div",{staticClass:"pagination-item"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},on:{input:function(s){return t.updatePage(t.currentPage)}},model:{value:t.currentPage,callback:function(s){t.currentPage=s},expression:"currentPage"}})],1)])},i=[],l={name:"Pagination",props:["currentPage","totalItem","itemPerPage","start","end"],data(){return{perPage:this.itemPerPage}},methods:{updatePage(t){this.$emit("selectedPage",t-1)}},computed:{rows(){return this.totalItem}}},r=l,o=(a("30b0"),a("2877")),c=Object(o["a"])(r,e,i,!1,null,"62654af7",null);s["a"]=c.exports},6653:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("b-card",{staticClass:"overflow-hidden"},[e("h5",{staticClass:"mb-4"},[e("i",{staticClass:"fa fa-id-card",attrs:{color:"#7367f0"}}),t._v(" รายละเอียดลูกค้า ")]),t.customerDetail?e("b-tabs",{attrs:{pills:""}},[e("b-tab",{attrs:{active:""},scopedSlots:t._u([{key:"title",fn:function(){return[e("i",{staticClass:"fa fa-info-circle"}),e("span",{staticClass:"d-none d-sm-inline"},[t._v(" ข้อมูลทั่วไป")])]},proxy:!0}],null,!1,1625110783)},[t.loading?e("div",{staticClass:"p-4"},[e("vcl-facebook")],1):t._e(),t.loading?t._e():e("div",{staticClass:"mt-4 pt-2"},[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("div",{staticClass:"mb-4"},[e("ExpandableImage",{staticClass:"img-profile",attrs:{src:t.customerDetail.image?t.customerDetail.image:a("5651")}})],1)]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("span",[e("span",{staticClass:"bold"},[t._v("ชื่อ : ")]),t._v(t._s(t.customerDetail.name?t.customerDetail.name:"-"))])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("span",[e("span",{staticClass:"bold"},[t._v("อีเมล : ")]),t._v(t._s(t.customerDetail.email?t.customerDetail.email:"-"))])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("span",[e("span",{staticClass:"bold"},[t._v("เบอร์โทรศัพท์ : ")]),t._v(t._s(t.customerDetail.phone?t.customerDetail.phone:"-"))])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("span",[e("span",{staticClass:"bold"},[t._v("เพศ : ")]),t._v(t._s(t.customerDetail.gender?t.customerDetail.gender:"-"))])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("span",[e("span",{staticClass:"bold"},[t._v("วันเกิด : ")]),e("CalendarIcon",{staticClass:"mb-1",attrs:{size:"18"}}),t._v(" "+t._s(t.customerDetail.birthdate?t.customerDetail.birthdate:"-"))],1)]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("เข้าใช้งานด้วย : ")]),"facebook"==t.customerDetail.signInWith?e("span",{staticClass:"facebook-color"},[e("i",{staticClass:"fab fa-facebook-f"}),t._v(" "+t._s(t.customerDetail.signInWith?t.customerDetail.signInWith:"-")+" ")]):t._e(),"google"==t.customerDetail.signInWith?e("span",{staticClass:"google-color"},[e("i",{staticClass:"fab fa-google"}),t._v(" "+t._s(t.customerDetail.signInWith?t.customerDetail.signInWith:"-")+" ")]):t._e(),"email"==t.customerDetail.signInWith?e("span",{staticClass:"email-color"},[e("i",{staticClass:"fa fa-envelope"}),t._v(" "+t._s(t.customerDetail.signInWith?t.customerDetail.signInWith:"-")+" ")]):t._e()])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("span",[e("span",{staticClass:"bold"},[t._v("Line ID : ")]),t._v(t._s(t.customerDetail.LineID?t.customerDetail.LineID:"-"))])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("span",[e("span",{staticClass:"bold"},[t._v("สมัครสมาชิกเมื่อ : ")]),e("CalendarIcon",{staticClass:"mr-1 mb-1",attrs:{size:"18"}}),t._v(t._s(t.customerDetail.createAt?t.customerDetail.createAt:"-"))],1)])],1)],1)]),e("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[e("i",{staticClass:"fa fa-map-marker-alt"}),e("span",{staticClass:"d-none d-sm-inline"},[t._v(" ข้อมูลที่อยู่")])]},proxy:!0}],null,!1,377842635)},[e("div",{staticClass:"pl-3 mt-3 bold color-primary text-decoration-underline"},[t._v("ที่อยู่ในการจัดส่ง")]),e("b-row",{staticClass:"p-3"},[e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("ชื่อ-สกุล (ผู้รับ) : ")]),t._v(t._s(t.customerDetail.address.name?t.customerDetail.address.name:"-")+" ")])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("เบอร์โทรศัพท์ : ")]),t._v(t._s(t.customerDetail.address.phone?t.customerDetail.address.phone:"-")+" ")])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("บ้านเลขที่ : ")]),t._v(t._s(t.customerDetail.address.houseNumber?t.customerDetail.address.houseNumber:"-")+" ")])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("ซอย : ")]),t._v(t._s(t.customerDetail.address.soy?t.customerDetail.address.soy:"-")+" ")])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("ถนน : ")]),t._v(t._s(t.customerDetail.address.road?t.customerDetail.address.road:"-")+" ")])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("ตำบล/แขวง : ")]),t._v(t._s(t.customerDetail.address.district?t.customerDetail.address.district:"-")+" ")])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("อำเภอ/เขต : ")]),t._v(t._s(t.customerDetail.address.amphoe?t.customerDetail.address.amphoe:"-")+" ")])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("จังหวัด : ")]),t._v(t._s(t.customerDetail.address.province?t.customerDetail.address.province:"-")+" ")])]),e("b-col",{staticClass:"mt-2 mb-2",attrs:{md:"6"}},[e("div",[e("span",{staticClass:"bold"},[t._v("รหัสไปรษณี : ")]),t._v(t._s(t.customerDetail.address.zipcode?t.customerDetail.address.zipcode:"-")+" ")])])],1)],1),e("b-tab",{scopedSlots:t._u([{key:"title",fn:function(){return[e("i",{staticClass:"fa fa-history"}),e("span",{staticClass:"d-none d-sm-inline"},[t._v(" ประวัติการซื้อสินค้า")])]},proxy:!0}],null,!1,2263309102)},[e("div",{staticClass:"mt-3 pt-2"},[e("div",{staticClass:"pl-2"},[t._v("คำสั่งซื้อทั้งหมด : "+t._s(t.orderItem.length))]),0==t.orderItem.length?e("div",{staticClass:"text-center p-4"},[e("img",{attrs:{src:a("0fda"),width:"400px"}})]):t._e(),t._l(t.orderItem,(function(s,a){return e("div",{key:a},[e("b-card",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion-"+s.accId,expression:"'accordion-' + item.accId"}],staticClass:"mt-2 card-border collapse-icon"},[e("div",{staticClass:"content-order row"},[e("div",{staticClass:"col"},[e("small",{staticClass:"text-primary"},[t._v("หมายเลขคำสั่งซื้อ")]),e("div",[e("FileTextIcon",{staticClass:"mb-1 mr-1",attrs:{size:"18",color:"#7367f0"}}),t._v(t._s(s.orderID))],1)]),e("div",{staticClass:"col"},[e("small",{staticClass:"text-primary"},[t._v("วันที่สั่ง")]),e("div",{staticClass:"createOrder"},[e("CalendarIcon",{staticClass:"mb-1 mr-1",attrs:{size:"14"}}),t._v(t._s(s.createAt)+" ")],1)]),e("div",{staticClass:"col-3"},[e("small",{staticClass:"text-primary"},[t._v("สถานะ")]),"รอชำระ"==s.status?e("div",[e("b-badge",{staticClass:"status-wait-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-clock"}),t._v(" "+t._s(s.status))])],1):t._e(),"รอการตรวจสอบ"==s.status?e("div",[e("b-badge",{staticClass:"status-checkSlip-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-search-dollar"}),t._v(" "+t._s(s.status))])],1):t._e(),"เตรียมจัดส่ง"==s.status?e("div",[e("b-badge",{staticClass:"status-ready-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-truck-loading"}),t._v(" "+t._s(s.status))])],1):t._e(),"อยู่ระหว่างการจัดส่ง"==s.status?e("div",[e("b-badge",{staticClass:"status-sent-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-shipping-fast"}),t._v(" "+t._s(s.status))])],1):t._e(),"จัดส่งแล้ว"==s.status?e("div",[e("b-badge",{staticClass:"status-check-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-check"}),t._v(" "+t._s(s.status))])],1):t._e(),"ยกเลิก"==s.status?e("div",[e("b-badge",{staticClass:"status-cancle-style font-14",attrs:{pill:""}},[e("i",{staticClass:"fa fa-times"}),t._v(" "+t._s(s.status))])],1):t._e()]),"อยู่ระหว่างการจัดส่ง"==s.status||"จัดส่งแล้ว"==s.status?e("div",{staticClass:"col tackNum"},[e("small",{staticClass:"text-primary"},[t._v("หมายเลขพัสดุ")]),e("div",[t._v(t._s(s.deliverNumber?s.deliverNumber:"-"))])]):t._e(),"อยู่ระหว่างการจัดส่ง"!=s.status&&"จัดส่งแล้ว"!=s.status?e("div",{staticClass:"col slip"},[e("small",{staticClass:"text-primary"},[t._v("รายการสินค้า")]),e("div",[t._v(t._s(0!=s.orderItems.length?s.orderItems.length:"0")+" รายการ")])]):t._e(),"อยู่ระหว่างการจัดส่ง"==s.status||"จัดส่งแล้ว"==s.status?e("div",{staticClass:"col tackCom"},[e("small",{staticClass:"text-primary"},[t._v("บริษัทขนส่ง")]),e("div",[t._v(t._s(s.deliverCompany?s.deliverCompany:"-"))])]):t._e(),"อยู่ระหว่างการจัดส่ง"!=s.status&&"จัดส่งแล้ว"!=s.status?e("div",{staticClass:"col all-price"},[e("small",{staticClass:"text-primary"},[t._v("ราคารวม")]),e("div",[t._v(t._s(s.totalAll?s.totalAll:"-")+" บาท")])]):t._e(),e("div",{staticClass:"col-1 icon-coll"},[e("i",{staticClass:"fa fa-chevron-up icon-coll-open"})])])]),e("b-collapse",{attrs:{id:"accordion-"+s.accId,accordion:"my-accordion",role:"tabpanel"}},[e("b-card-body",[e("b-card-text",[e("div",{staticClass:"mb-2"},[e("span",{staticClass:"bold"},[t._v("จำนวนสินค้า : ")]),t._v(" "+t._s(s.orderItems.length)+" รายการ ")]),e("b-table",{attrs:{responsive:"sm",items:s.orderItems,fields:t.fields,"show-empty":"","empty-text":"ไม่พบข้อมูล","empty-filtered-text":"ไม่พบข้อมูล","tbody-tr-class":"tableHover"},scopedSlots:t._u([{key:"cell(image)",fn:function(t){return[e("ExpandableImage",{staticClass:"sm-image",attrs:{src:t.item.image}})]}},{key:"cell(name)",fn:function(s){return[e("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"pro-name-detail",attrs:{title:s.item.name}},[t._v(" "+t._s(s.item.name)+" ")]),e("div",{staticClass:"color-primary font-14"},[t._v(" "+t._s(s.item.productID)+" ")])]}},{key:"cell(price)",fn:function(s){return[s.item.discount?t._e():e("div",{staticClass:"price-width"},[e("div",[t._v(t._s(s.item.price)+" บาท")])]),s.item.discount?e("div",{staticClass:"price-width"},[e("div",{staticClass:"font-dis"},[t._v(" "+t._s(s.item.fullprice)+" บาท ")]),e("div",[t._v(t._s(s.item.price)+" บาท")])]):t._e()]}},{key:"cell(quantity)",fn:function(s){return[e("span",[t._v(" "+t._s(s.item.quantity)+" ชิ้น")])]}},{key:"cell(total)",fn:function(s){return[e("span",[t._v(" "+t._s(s.item.total)+" บาท")])]}}],null,!0)}),e("div",[e("span",{staticClass:"bold"},[t._v("ราคาสินค้ารวม : ")]),t._v(" "+t._s(t.formatPrice(s.totalPrice))+" บาท ")]),e("div",[e("span",{staticClass:"bold"},[t._v("ค่าส่ง : ")]),t._v(" "+t._s(0!=s.deliverPrice?s.deliverPrice+" บาท":"ส่งฟรี")+" ")]),e("div",[e("span",{staticClass:"bold"},[t._v("รวมทั้งหมด : ")]),t._v(" "+t._s(t.formatPrice(s.totalAll))+" บาท ")])],1)],1)],1)],1)}))],2),0!=this.orderItem.length?e("div",{staticClass:"mx-2"},[e("b-row",[e("b-col",{staticClass:"\n                d-flex\n                align-items-center\n                justify-content-center justify-content-sm-start\n              ",attrs:{cols:"12",sm:"6"}},[e("span",{staticClass:"text-mute"},[t._v("ออเดอร์ที่ "+t._s(t.itemStart)+" - "+t._s(t.itemEnd)+" จาก "+t._s(t.totalDatas))])]),e("b-col",{staticClass:"\n                d-flex\n                align-items-center\n                justify-content-center justify-content-sm-end\n              ",attrs:{cols:"12",sm:"6"}},[e("Pagination",{attrs:{currentPage:this.$store.state.currentP+1,totalItem:t.totalDatas,itemPerPage:t.itemPerPage,start:t.itemStart,end:t.itemEnd},on:{selectedPage:t.loadMore}})],1)],1)],1):t._e()])],1):t._e()],1)],1)},i=[],l=a("28f7"),r=a("68ee"),o=(a("78a7"),a("c1df")),c=a.n(o),n=a("0a35"),d=a("6407"),m=a("7a4f"),u={name:"customerDetail",components:{VclFacebook:r["VclFacebook"],CalendarIcon:n["c"],Pagination:d["a"],ExpandableImage:m["a"],FileTextIcon:n["g"]},data(){return{loading:!1,customerDetail:{uid:"",name:"",email:"",image:"",phone:"",point:0,gender:"",createAt:"",birthdate:"",signinWith:"",address:{}},totalDatas:null,itemPerPage:20,itemStart:null,itemEnd:null,customerOrders:[],idCustomer:this.$route.params.id,orderItem:[],fields:[{key:"image"},{key:"name",sortable:!0},{key:"price",sortable:!0},{key:"quantity",sortable:!0},{key:"total",sortable:!0}]}},created(){window.scrollTo(0,0),this.loadCustomerDetail()},methods:{loadCustomerDetail(){this.loading=!0;const t=l["a"].firestore().doc("users/"+this.idCustomer);return t.get().then(t=>{this.loading=!1;var s={uid:t.id,name:t.data().name,email:t.data().email,image:t.data().image,phone:t.data().phone,gender:t.data().gender,createAt:this.formatDate(t.data().createAt),lineID:t.data().lineID,birthdate:t.data().birthdate?this.formatBD(t.data().birthdate):"-",signInWith:t.data().signinWith,address:t.data().address?t.data().address:{}};this.customerDetail=s,this.loadOrders()}).catch(t=>{console.log(t),this.loading=!1,this.$router.replace("/error")})},loadOrders(){let t=this.itemPerPage*this.$store.state.currentP;const s=l["a"].firestore().collection("orders").where("userID","==",this.customerDetail.uid).orderBy("createAt","desc");s.get().then(a=>{let e=a.docs[t];var i=a.docs.length,l=this.$store.state.currentP+1,r=l*this.itemPerPage-(this.itemPerPage-1),o=Math.min(r+this.itemPerPage-1,i);if(this.itemStart=r,this.itemEnd=o,this.totalDatas=i,e)var c=s.startAt(e).limit(this.itemPerPage);else c=s.limit(this.itemPerPage);c.get().then(t=>{var s=[],a=1;t.forEach(t=>{var e=[],i=t.data().items;i.map(t=>{var s={image:t.image,name:t.name,productID:t.productID,price:this.formatPrice(t.price),fullprice:t.fullprice,discount:t.discount,quantity:t.quantity,total:this.formatPrice(t.price*t.quantity)};e.push(s)});var l={id:t.id,accId:a,orderID:t.data().orderID,orderItems:e,status:t.data().status,totalAll:t.data().totalAll,totalPrice:t.data().totalPrice,deliverPrice:t.data().deliverPrice,paywith:t.data().paywith,slipImage:t.data().slipImage,address:t.data().address,payon:t.data().payon?this.formatDate(t.data().payon):"",deliverNumber:t.data().deliverNumber,deliverCompany:t.data().deliverCompany,createAt:t.data().createAt?this.formatDate(t.data().createAt):"",updateAt:t.data().updateAt?this.formatDate(t.data().updateAt):""};s.push(l),a+=1}),this.orderItem=s}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)})},formatDate(t){var s=t.toDate(),a=c()(s).format("DD-MM-YYYY HH:mm");return a},formatBD(t){var s=t.toDate(),a=c()(s).format("DD-MM-YYYY");return a},formatPrice(t){let s=(t/1).toFixed(0);return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},loadMore(t){this.$store.dispatch("changePage",t),this.loadOrders()}}},p=u,v=(a("8850"),a("2877")),_=Object(v["a"])(p,e,i,!1,null,null,null);s["default"]=_.exports},"7a4f":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"expandable-image",class:{expanded:t.expanded},on:{click:function(s){t.expanded=!0}}},[t.expanded?a("i",{staticClass:"close-button",on:{click:function(s){t.expanded=!1}}},[a("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"#666666",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}})])]):a("i",{staticClass:"expand-button"},[a("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"#000000",d:"M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z"}})])]),a("img",t._b({},"img",t.$attrs,!1))])},i=[],l={inheritAttrs:!1,name:"ExpandableImage",data(){return{expanded:!1}},methods:{closeImage(t){this.expanded=!1,t.stopPropagation()},freezeVp(t){t.preventDefault()}},watch:{expanded(t){this.$nextTick(()=>{t?(this.cloned=this.$el.cloneNode(!0),this.closeButtonRef=this.cloned.querySelector(".close-button"),this.closeButtonRef.addEventListener("click",this.closeImage),document.body.appendChild(this.cloned),document.body.style.overflow="hidden",setTimeout(()=>{this.cloned.style.opacity=1},0)):(this.cloned.style.opacity=0,setTimeout(()=>{this.closeButtonRef.removeEventListener("click",this.closeImage),this.cloned.remove(),this.cloned=null,this.closeButtonRef=null,document.body.style.overflow="auto"},250))})}}},r=l,o=(a("8b40"),a("2877")),c=Object(o["a"])(r,e,i,!1,null,null,null);s["a"]=c.exports},8850:function(t,s,a){"use strict";a("dec8")},"8b40":function(t,s,a){"use strict";a("24d9")},dec8:function(t,s,a){}}]);
//# sourceMappingURL=chunk-22701e8a.5697f96e.js.map