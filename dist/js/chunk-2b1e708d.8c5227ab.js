(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b1e708d"],{"0027":function(t,e,a){"use strict";a("4be4")},"30b0":function(t,e,a){"use strict";a("5a74")},"4be4":function(t,e,a){},5651:function(t,e,a){t.exports=a.p+"img/userDF.d961d73a.png"},"5a74":function(t,e,a){},6407:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overflow-auto"},[a("div",{staticClass:"pagination-item"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},on:{input:function(e){return t.updatePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])},i=[],r={name:"Pagination",props:["currentPage","totalItem","itemPerPage","start","end"],data(){return{perPage:this.itemPerPage}},methods:{updatePage(t){this.$emit("selectedPage",t-1)}},computed:{rows(){return this.totalItem}}},n=r,l=(a("30b0"),a("2877")),o=Object(l["a"])(n,s,i,!1,null,"62654af7",null);e["a"]=o.exports},f359:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customerPage"},[a("b-card",{staticClass:"overflow-hidden"},[a("b-card-text",[a("h5",{staticClass:"mb-4"},[a("i",{staticClass:"fa fa-users",attrs:{color:"#7367f0"}}),t._v(" รายชื่อลูกค้า ")]),a("div",{staticClass:"mb-3 mx-2"},[a("b-row",[a("b-col",{staticClass:"d-flex align-items-center justify-content-start mb-1",attrs:{cols:"12",lg:"3",md:"6"}},[a("label",[t._v("แสดง")]),a("b-select",{staticClass:"per-page-selector d-inline-block mx-50 select-per-page ml-2 mr-2",attrs:{options:t.perPageOptions,clearable:!1},on:{change:t.changeItemPerPage},model:{value:t.itemPerPage,callback:function(e){t.itemPerPage=e},expression:"itemPerPage"}}),a("label",[t._v("รายการ")])],1),a("b-col",{staticClass:"d-none d-md-inline",attrs:{cols:"12",lg:"4",md:"6"}},[a("div",{staticClass:"d-flex align-items-center justify-content-end mb-1"},[a("label",{staticClass:"sign-width"},[t._v("เข้าใช้งานด้วย")]),a("b-select",{staticClass:"per-page-selector d-inline-block mx-50 ml-2 mr-2",attrs:{options:t.filterSign,clearable:!1},on:{change:t.changeFilter},model:{value:t.signFilter,callback:function(e){t.signFilter=e},expression:"signFilter"}})],1)]),a("b-col",{staticClass:"d-none d-md-inline",attrs:{cols:"12",lg:"5",md:"6"}},[a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.searchCustomer(e)}}},[a("b-input-group",{staticClass:"input-group-merge pr-2"},[a("b-form-input",{staticClass:"d-inline-block",attrs:{placeholder:"ค้นหารายชื่อ"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("b-input-group-append",{staticClass:"pointer",attrs:{"is-text":""},on:{click:t.searchCustomer}},[a("i",{staticClass:"fas fa-search"})])],1)],1)],1)]),a("b-col",{staticClass:"d-md-none",attrs:{cols:"12",lg:"6",md:"6"}},[a("div",{staticClass:"mb-3 text-right custom-filters"},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-filter",expression:"'collapse-filter'"}],staticClass:"collapse-icon",attrs:{size:"sm",variant:"outline-info"}},[t._v("ฟิลเตอร์ "),a("div",{staticClass:"col-1 icon-coll d-inline"},[a("i",{staticClass:"fa fa-chevron-up icon-coll-open-filter"})])])],1),a("b-collapse",{attrs:{id:"collapse-filter"}},[a("div",{staticClass:"d-flex align-items-center justify-content-end mb-1"},[a("label",{staticClass:"sign-width"},[t._v("เข้าใช้งานด้วย")]),a("b-select",{staticClass:"per-page-selector d-inline-block mx-50 ml-2 mr-2",attrs:{options:t.filterSign,clearable:!1},on:{change:t.changeFilter},model:{value:t.signFilter,callback:function(e){t.signFilter=e},expression:"signFilter"}})],1),a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.searchCustomer(e)}}},[a("b-input-group",{staticClass:"input-group-merge pr-2"},[a("b-form-input",{staticClass:"d-inline-block",attrs:{placeholder:"ค้นหารายชื่อ"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("b-input-group-append",{staticClass:"pointer",attrs:{"is-text":""},on:{click:t.searchCustomer}},[a("i",{staticClass:"fas fa-search"})])],1)],1)],1)])],1)],1)],1),t.loading?a("div",{staticClass:"p-5"},[a("vcl-table")],1):t._e(),t.loading?t._e():a("div",[a("b-card-body",[0!=this.customerData.length?a("div",{staticClass:"text-mute mb-2"},[t._v("รายชื่อที่ "+t._s(t.itemStart)+" - "+t._s(t.itemEnd)+" จาก "+t._s(t.totalDatas))]):t._e(),a("b-table",{attrs:{items:t.customerData,fields:t.fields,hover:!0,responsive:"","show-empty":"","empty-text":"ไม่พบข้อมูล","empty-filtered-text":"ไม่พบข้อมูล","tbody-tr-class":"tableHover"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return[a("b-dropdown",{staticClass:"dropdown-right",attrs:{size:"md",variant:"link",right:"","no-caret":""},scopedSlots:t._u([{key:"button-content",fn:function(){return[a("i",{staticClass:"fa fa-ellipsis-v",attrs:{color:"#7367f0"}})]},proxy:!0}],null,!0)},[a("b-dropdown-item",{on:{click:function(a){return t.getDetail(e.item)}}},[a("i",{staticClass:"fa fa-search"}),t._v(" รายละเอียด")])],1)]}},{key:"cell(name)",fn:function(e){return[a("div",{staticClass:"name-width"},[a("b-avatar",{attrs:{size:"32",src:e.item.image}}),a("span",{staticClass:"link-detail",on:{click:function(a){return t.getDetail(e.item)}}},[t._v(" "+t._s(e.item.name))])],1)]}},{key:"cell(phone)",fn:function(e){return[a("div",{staticClass:"phone-width"},[t._v(" "+t._s(e.item.phone)+" ")])]}},{key:"cell(signInWith)",fn:function(e){return[a("div",{staticClass:"signIn-width"},["facebook"==e.item.signInWith?a("span",{staticClass:"facebook-color"},[a("i",{staticClass:"fab fa-facebook-f mr-1"}),t._v(t._s(e.item.signInWith))]):t._e(),"google"==e.item.signInWith?a("span",{staticClass:"google-color"},[a("i",{staticClass:"fab fa-google mr-1"}),t._v(t._s(e.item.signInWith))]):t._e(),"email"==e.item.signInWith?a("span",{staticClass:"email-color"},[a("i",{staticClass:"fa fa-envelope mr-1"}),t._v(t._s(e.item.signInWith))]):t._e()])]}}],null,!1,449809308)})],1),0!=this.customerData.length?a("div",{staticClass:"mx-2"},[a("b-row",[a("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-start",attrs:{cols:"12",sm:"6"}},[a("span",{staticClass:"text-mute total-data"},[t._v("รายชื่อที่ "+t._s(t.itemStart)+" - "+t._s(t.itemEnd)+" จาก "+t._s(t.totalDatas))])]),a("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-end",attrs:{cols:"12",sm:"6"}},[a("Pagination",{attrs:{currentPage:this.$store.state.currentP+1,totalItem:t.totalDatas,itemPerPage:t.itemPerPage,start:t.itemStart,end:t.itemEnd},on:{selectedPage:t.loadMore}})],1)],1)],1):t._e()],1)])],1)],1)},i=[],r=a("28f7"),n=(a("78a7"),a("68ee")),l=a("6407"),o=a("c1df"),c=a.n(o),m={name:"customer",components:{VclTable:n["VclTable"],Pagination:l["a"]},data(){return{customerData:[],loading:!1,searchQuery:"",signFilter:"ทั้งหมด",filterSign:["ทั้งหมด","email","google","facebook"],fields:[{key:"name",sortable:!0},{key:"email",sortable:!0},{key:"phone",sortable:!0},{key:"gender",sortable:!0},{key:"signInWith",sortable:!0},{key:"actions"}],perPageOptions:["25","50","75"],totalDatas:null,itemPerPage:25,itemStart:null,itemEnd:null}},created(){this.loadCustomer()},methods:{loadCustomer(){this.loading=!0;let t=this.itemPerPage*this.$store.state.currentP;var e;return e="ทั้งหมด"!=this.signFilter?""!=this.searchQuery?r["a"].firestore().collection("users").where("role","==","user").where("name",">=",this.searchQuery).where("name","<=",this.searchQuery+"").where("signinWith","==",this.signFilter):r["a"].firestore().collection("users").where("role","==","user").where("signinWith","==",this.signFilter).orderBy("createAt","desc"):""!=this.searchQuery?r["a"].firestore().collection("users").where("role","==","user").where("name",">=",this.searchQuery).where("name","<=",this.searchQuery+""):r["a"].firestore().collection("users").where("role","==","user").orderBy("createAt","desc"),e.get().then(s=>{let i=s.docs[t];var r=s.docs.length,n=this.$store.state.currentP+1,l=n*this.itemPerPage-(this.itemPerPage-1),o=Math.min(l+this.itemPerPage-1,r);if(this.itemStart=l,this.itemEnd=o,this.totalDatas=r,i)var c=e.startAt(i).limit(this.itemPerPage);else c=e.limit(this.itemPerPage);c.get().then(t=>{var e=[];t.forEach(t=>{var s={uid:t.id,name:t.data().name,email:t.data().email,image:t.data().image?t.data().image:a("5651"),phone:t.data().phone?t.data().phone:"-",signInWith:t.data().signinWith,birthdate:t.data().birthdate?this.formatDate(t.data().birthdate):"-",gender:t.data().gender?t.data().gender:"-"};e.push(s)}),this.customerData=e,this.loading=!1}).catch(t=>{this.loading=!1,console.log(t)})}).catch(t=>{this.loading=!1,console.log(t)})},loadMore(t){this.$store.dispatch("changePage",t),this.loadCustomer()},changeItemPerPage(t){this.itemPerPage=t,this.loadCustomer()},searchCustomer(){this.loadCustomer()},formatDate(t){var e=t.toDate(),a=c()(e).format("DD-MM-YYYY");return a},getDetail(t){this.$router.push("/admin/customer/"+t.uid)},changeFilter(t){this.signFilter=t,this.loadCustomer()}}},u=m,d=(a("0027"),a("2877")),g=Object(d["a"])(u,s,i,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2b1e708d.8c5227ab.js.map