(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1daa253c"],{"24d9":function(t,e,a){},"30b0":function(t,e,a){"use strict";a("5a74")},5651:function(t,e,a){t.exports=a.p+"img/userDF.d961d73a.png"},"5a74":function(t,e,a){},6407:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"overflow-auto"},[a("div",{staticClass:"pagination-item"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table"},on:{input:function(e){return t.updatePage(t.currentPage)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])},s=[],n={name:"Pagination",props:["currentPage","totalItem","itemPerPage","start","end"],data(){return{perPage:this.itemPerPage}},methods:{updatePage(t){this.$emit("selectedPage",t-1)}},computed:{rows(){return this.totalItem}}},l=n,o=(a("30b0"),a("2877")),r=Object(o["a"])(l,i,s,!1,null,"62654af7",null);e["a"]=r.exports},7977:function(t,e,a){"use strict";a("8c27")},"7a4f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"expandable-image",class:{expanded:t.expanded},on:{click:function(e){t.expanded=!0}}},[t.expanded?a("i",{staticClass:"close-button",on:{click:function(e){t.expanded=!1}}},[a("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"#666666",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}})])]):a("i",{staticClass:"expand-button"},[a("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"#000000",d:"M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z"}})])]),a("img",t._b({},"img",t.$attrs,!1))])},s=[],n={inheritAttrs:!1,name:"ExpandableImage",data(){return{expanded:!1}},methods:{closeImage(t){this.expanded=!1,t.stopPropagation()},freezeVp(t){t.preventDefault()}},watch:{expanded(t){this.$nextTick(()=>{t?(this.cloned=this.$el.cloneNode(!0),this.closeButtonRef=this.cloned.querySelector(".close-button"),this.closeButtonRef.addEventListener("click",this.closeImage),document.body.appendChild(this.cloned),document.body.style.overflow="hidden",setTimeout(()=>{this.cloned.style.opacity=1},0)):(this.cloned.style.opacity=0,setTimeout(()=>{this.closeButtonRef.removeEventListener("click",this.closeImage),this.cloned.remove(),this.cloned=null,this.closeButtonRef=null,document.body.style.overflow="auto"},250))})}}},l=n,o=(a("8b40"),a("2877")),r=Object(o["a"])(l,i,s,!1,null,null,null);e["a"]=r.exports},"8b40":function(t,e,a){"use strict";a("24d9")},"8c27":function(t,e,a){},cd7c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-card",{staticClass:"overflow-hidden"},[i("h5",{staticClass:"mb-4"},[i("i",{staticClass:"fas fa-bell",attrs:{color:"#7367f0"}}),t._v(" Line Notification ")]),i("div",{staticClass:"mb-3 mx-2"},[i("b-row",[i("b-col",{staticClass:"d-flex align-items-center justify-content-start mb-1",attrs:{cols:"12",lg:"3",md:"6"}},[i("label",[t._v("แสดง")]),i("b-select",{staticClass:"\n              per-page-selector\n              d-inline-block\n              mx-50\n              select-per-page\n              ml-2\n              mr-2\n            ",attrs:{options:t.perPageOptions,clearable:!1},on:{change:t.changeItemPerPage},model:{value:t.itemPerPage,callback:function(e){t.itemPerPage=e},expression:"itemPerPage"}}),i("label",[t._v("รายการ")])],1)],1)],1),t.loading?i("div",{staticClass:"p-5"},[i("vcl-table")],1):t._e(),t.loading?t._e():i("div",[i("b-card-body",[0!=this.lineNotify.length?i("div",{staticClass:"text-mute mb-2"},[t._v(" แจ้งเตือนการชำระที่ "+t._s(t.itemStart)+" - "+t._s(t.itemEnd)+" จาก "+t._s(t.totalDatas)+" ")]):t._e(),i("b-table",{attrs:{items:t.lineNotify,fields:t.fields,hover:!0,responsive:"","show-empty":"","empty-text":"ไม่พบข้อมูล","empty-filtered-text":"ไม่พบข้อมูล","tbody-tr-class":"tableHover"},scopedSlots:t._u([{key:"cell(user)",fn:function(e){return[i("div",{staticClass:"name-width"},[i("b-avatar",{attrs:{size:"36",src:e.item.image?e.item.image:a("5651")}}),i("span",[t._v(" "+t._s(e.item.name))])],1)]}},{key:"cell(orderID)",fn:function(e){return[i("div",{staticClass:"order-width text-primary link-detail"},[i("span",{on:{click:function(a){return t.gotoOrderDetail(e.item.orderID)}}},[t._v("#"+t._s(e.item.orderID?e.item.orderID:"-"))])])]}},{key:"cell(slipPayment)",fn:function(t){return[i("div",{staticClass:"rating-width ml-3"},[i("ExpandableImage",{staticClass:"xs-image",attrs:{src:t.item.slip}})],1)]}},{key:"cell(payOn)",fn:function(e){return[i("div",{staticClass:"time-width text-small"},[t._v(" "+t._s(t.formatDate(e.item.payon))+" ")])]}},{key:"cell(item-price)",fn:function(e){return[i("div",{staticClass:"priceItem-width"},[i("div",{staticClass:"font-14"},[t._v(" จำนวนสินค้า : "+t._s(e.item.totalItem)+" รายการ ")]),i("div",{staticClass:"font-14"},[t._v(" ราคาทั้งหมด : "+t._s(t.formatPrice(e.item.totalAll))+" บาท ")])])]}}],null,!1,2730528048)})],1),0!=this.lineNotify.length?i("div",{staticClass:"mx-2"},[i("b-row",[i("b-col",{staticClass:"\n              d-flex\n              align-items-center\n              justify-content-center justify-content-sm-start\n            ",attrs:{cols:"12",sm:"6"}},[i("span",{staticClass:"text-mute total-data"},[t._v("แจ้งเตือนการชำระที่ "+t._s(t.itemStart)+" - "+t._s(t.itemEnd)+" จาก "+t._s(t.totalDatas))])]),i("b-col",{staticClass:"\n              d-flex\n              align-items-center\n              justify-content-center justify-content-sm-end\n            ",attrs:{cols:"12",sm:"6"}},[i("Pagination",{attrs:{currentPage:this.$store.state.currentP+1,totalItem:t.totalDatas,itemPerPage:t.itemPerPage,start:t.itemStart,end:t.itemEnd},on:{selectedPage:t.loadMore}})],1)],1)],1):t._e()],1)])],1)},s=[],n=a("28f7"),l=a("68ee"),o=a("c1df"),r=a.n(o),c=a("6407"),d=a("7a4f"),m={name:"LineNotify",data(){return{loading:!1,fields:[{key:"user",sortable:!0},{key:"orderID"},{key:"item-price"},{key:"payOn",sortable:!0},{key:"slipPayment"}],lineNotify:[],perPageOptions:["25","50","75"],totalDatas:null,itemPerPage:25,itemStart:null,itemEnd:null}},components:{VclTable:l["VclTable"],Pagination:c["a"],ExpandableImage:d["a"]},created(){this.loadLineNoti()},methods:{loadLineNoti(){this.loading=!0;let t=this.itemPerPage*this.$store.state.currentP;const e=n["a"].firestore().collection("oders").orderBy("payon","desc");return e.get().then(a=>{let i=a.docs[t];var s=a.docs.length,n=this.$store.state.currentP+1,l=n*this.itemPerPage-(this.itemPerPage-1),o=Math.min(l+this.itemPerPage-1,s);if(this.itemStart=l,this.itemEnd=o,this.totalDatas=s,i)var r=e.startAt(i).limit(this.itemPerPage);else r=e.limit(this.itemPerPage);return r.get().then(t=>{var e=[];t.forEach(t=>{const a={id:t.id,payon:t.data().payon,name:t.data().name,image:t.data().image,orderID:t.data().orderID,totalAll:t.data().totalAll,slip:t.data().slip,totalItem:t.data().totalItem};e.push(a)}),this.lineNotify=e,this.loading=!1}).catch(t=>{this.loading=!1,console.log(t)})}).catch(t=>{this.loading=!1,console.log(t)})},formatDate(t){var e=t.toDate(),a=r()(e).format("DD-MM-YYYY HH:mm");return a},formatPrice(t){let e=(t/1).toFixed(0);return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},loadMore(t){this.$store.dispatch("changePage",t),this.loadLineNoti()},changeItemPerPage(t){this.itemPerPage=t,this.loadLineNoti()},gotoOrderDetail(t){var e=n["a"].firestore().collection("orders");e.where("orderID","==",t).get().then(t=>{var e=t.docs[0].id;e&&this.$router.push("/admin/order/"+e)})}}},u=m,h=(a("7977"),a("2877")),p=Object(h["a"])(u,i,s,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-1daa253c.f2c56bdb.js.map