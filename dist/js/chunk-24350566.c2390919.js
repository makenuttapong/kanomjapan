(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24350566"],{"24d9":function(t,e,a){},3614:function(t,e,a){},"6cf2":function(t,e,a){"use strict";var o=a("1fca"),s=a("30ef"),l=a.n(s);l.a.elements.Rectangle.prototype.draw=function(){let t,e,a,o,s,l,i,r=this._chart.ctx,n=this._view,d=n.borderWidth,c=20;if(n.horizontal?(t=n.base,e=n.x,a=n.y-n.height/2,o=n.y+n.height/2,s=e>t?1:-1,l=1,i=n.borderSkipped||"left"):(t=n.x-n.width/2,e=n.x+n.width/2,a=n.y,o=n.base,s=1,l=a>o?1:-1,i=n.borderSkipped||"bottom"),d){let r=Math.min(Math.abs(t-e),Math.abs(a-o));d=d>r?r:d;let n=d/2,c=t+("left"!==i?n*s:0),h=e+("right"!==i?-n*s:0),u=a+("top"!==i?n*l:0),p=o+("bottom"!==i?-n*l:0);c!==h&&(a=u,o=p),u!==p&&(t=c,e=h)}r.beginPath(),r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=d;let h=[[t,o],[t,a],[e,a],[e,o]],u=["bottom","left","top","right"],p=u.indexOf(i,0);function f(t){return h[(p+t)%4]}-1===p&&(p=0);let m=f(0);r.moveTo(m[0],m[1]);for(let C=1;C<4;C++){m=f(C);let t=C+1;4==t&&(t=0);f(t);let e=h[2][0]-h[1][0],a=h[0][1]-h[1][1],o=h[1][0],s=h[1][1],l=c;l>a/2&&(l=a/2),l>e/2&&(l=e/2),n.horizontal?(r.moveTo(o+l,s),r.lineTo(o+e-l,s),r.quadraticCurveTo(o+e,s,o+e,s+l),r.lineTo(o+e,s+a-l),r.quadraticCurveTo(o+e,s+a,o+e-l,s+a),r.lineTo(o+l,s+a),r.quadraticCurveTo(o,s+a,o,s+a),r.lineTo(o,s+l),r.quadraticCurveTo(o,s,o,s)):(r.moveTo(o+l,s),r.lineTo(o+e-l,s),r.quadraticCurveTo(o+e,s,o+e,s+l),r.lineTo(o+e,s+a-l),r.quadraticCurveTo(o+e,s+a,o+e,s+a),r.lineTo(o+l,s+a),r.quadraticCurveTo(o,s+a,o,s+a),r.lineTo(o,s+l),r.quadraticCurveTo(o,s,o+l,s))}r.fill(),d&&r.stroke()};var i,r,n={extends:o["a"],props:{data:{type:Object,default:null},options:{type:Object,default:null}},mounted(){this.renderChart(this.data,this.options)}},d=n,c=a("2877"),h=Object(c["a"])(d,i,r,!1,null,null,null);e["a"]=h.exports},"7a4f":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"expandable-image",class:{expanded:t.expanded},on:{click:function(e){t.expanded=!0}}},[t.expanded?a("i",{staticClass:"close-button",on:{click:function(e){t.expanded=!1}}},[a("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"#666666",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}})])]):a("i",{staticClass:"expand-button"},[a("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"#000000",d:"M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z"}})])]),a("img",t._b({},"img",t.$attrs,!1))])},s=[],l={inheritAttrs:!1,name:"ExpandableImage",data(){return{expanded:!1}},methods:{closeImage(t){this.expanded=!1,t.stopPropagation()},freezeVp(t){t.preventDefault()}},watch:{expanded(t){this.$nextTick(()=>{t?(this.cloned=this.$el.cloneNode(!0),this.closeButtonRef=this.cloned.querySelector(".close-button"),this.closeButtonRef.addEventListener("click",this.closeImage),document.body.appendChild(this.cloned),document.body.style.overflow="hidden",setTimeout(()=>{this.cloned.style.opacity=1},0)):(this.cloned.style.opacity=0,setTimeout(()=>{this.closeButtonRef.removeEventListener("click",this.closeImage),this.cloned.remove(),this.cloned=null,this.closeButtonRef=null,document.body.style.overflow="auto"},250))})}}},i=l,r=(a("8b40"),a("2877")),n=Object(r["a"])(i,o,s,!1,null,null,null);e["a"]=n.exports},"8b40":function(t,e,a){"use strict";a("24d9")},9832:function(t,e,a){"use strict";a("3614")},a884:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",[a("div",{staticClass:"d-flex space-between mb-4"},[a("h5",{staticClass:"mb-3"},[a("i",{staticClass:"fas fa-medal",attrs:{color:"#7367f0"}}),t._v(" สินค้าขายดี")]),a("div",{staticClass:"mx-50 select-month ml-2 mr-2"},[a("date-picker",{attrs:{valueType:"format",type:"month",format:"YYYY-MM"},on:{change:t.selectMonth},model:{value:t.monthSelect,callback:function(e){t.monthSelect=e},expression:"monthSelect"}})],1)]),t.loading?a("div",{staticClass:"p-4 row"},[a("vcl-twitch",{attrs:{width:"600px"}})],1):t._e(),t.loading?t._e():a("div",[0!=t.latestBarChart.data.labels.length?a("chartjs-component-bar-chart",{attrs:{height:400,data:t.latestBarChart.data,options:t.latestBarChart.options}}):t._e(),a("div",{staticClass:"mt-4 "},[0!=t.bestData.length?a("div",{staticClass:"mb-2 bold"},[t._v(" อันดับสินค้าขายดี ")]):t._e(),a("div",{staticClass:"allData ml-3"},[0==t.bestData.length?a("div",{staticClass:"text-center p-4 text-mute"},[t._v(" ไม่พบรายการสินค้า ")]):t._e(),t._l(t.bestData,(function(e,o){return a("div",{key:o,staticClass:"mb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mr-2 numIndex"},[t._v(t._s(o+1)+".")]),a("div",[a("ExpandableImage",{staticClass:"sm-image border",attrs:{src:e.image}})],1)]),a("div",{staticClass:"col ml-3"},[a("div",[t._v(t._s(e.name))]),a("div",[a("span",{staticClass:"productid"},[t._v(t._s(e.productID))])]),a("div",[a("span",{staticClass:"bold"},[t._v("ยอดขาย : ")]),a("span",{},[t._v(t._s(e.quantity)+" ชิ้น")])])])])])}))],2)])],1)])},s=[],l=a("28f7"),i=a("c1df"),r=a.n(i),n=a("6cf2"),d=(a("78a7"),a("7a4f")),c=a("68ee");const h={primaryColorShade:"#836AF9",yellowColor:"#ffe800",successColorShade:"#28dac6",warningColorShade:"#ffe802",warningLightColor:"#FDAC34",infoColorShade:"#299AFF",greyColor:"#4F5D70",blueColor:"#2c9aff",blueLightColor:"#84D0FF",greyLightColor:"#EDF1F4",tooltipShadow:"rgba(0, 0, 0, 0.25)",lineChartPrimary:"#666ee8",lineChartDanger:"#ff4961",labelColor:"#6e6b7b",grid_line_color:"rgba(200, 200, 200, 0.2)"};var u={name:"BestSale",components:{ChartjsComponentBarChart:n["a"],ExpandableImage:d["a"],VclTwitch:c["VclTwitch"]},data(){return{loading:!1,monthSelect:"",bestData:[],latestBarChart:{data:{labels:[],fullname:[],datasets:[{data:[],backgroundColor:h.successColorShade,borderColor:"transparent"}]},options:{elements:{rectangle:{borderWidth:2,borderSkipped:"bottom"}},responsive:!0,maintainAspectRatio:!1,responsiveAnimationDuration:500,legend:{display:!1},tooltips:{shadowOffsetX:1,shadowOffsetY:1,shadowBlur:8,shadowColor:h.tooltipShadow,backgroundColor:"#f8f8f8",titleFontColor:"#111111",bodyFontColor:"#111111",callbacks:{title:function(t,e){return e["fullname"][t[0]["index"]]},label:function(t,e){return"ยอดขาย "+e["datasets"][0]["data"][t["index"]]+" ชิ้น"}}},scales:{xAxes:[{display:!0,gridLines:{display:!0,color:h.grid_line_color,zeroLineColor:h.grid_line_color},scaleLabel:{display:!1},ticks:{fontColor:h.labelColor}}],yAxes:[{display:!0,gridLines:{color:h.grid_line_color,zeroLineColor:h.grid_line_color},ticks:{stepSize:100,min:0,max:200,fontColor:h.labelColor}}]}}}}},created(){this.monthSelect=r()().startOf("months").format("YYYY-MM"),this.nextMonthSelect=r()(this.monthSelect).add(1,"month").format("YYYY-MM"),this.loadBestSale()},methods:{loadBestSale(){this.loading=!0;var t=l["a"].firestore().collection("orders"),e=new Date(this.monthSelect+" 00:00"),a=new Date(this.nextMonthSelect+" 00:00");t.where("status","in",["เตรียมจัดส่ง","อยู่ระหว่างการจัดส่ง","จัดส่งแล้ว"]).where("createAt",">=",e).where("createAt","<",a).get().then(t=>{var e=[];t.forEach(t=>{t.data().items.forEach(t=>{e.push(t)})});var a=e.reduce((t,e)=>(t.some(t=>{if(t.id===e.id)return t.quantity=t.quantity+e.quantity,t.id===e.id})||t.push(e),t),[]);a.sort((t,e)=>parseFloat(t.quantity)-parseFloat(e.quantity)),a.reverse(),a=a.filter((t,e)=>e<10);var o=[],s=[],l=[];this.bestData=a;for(var i=0;i<10;i++)a[i]?(o.push(a[i].productID),s.push(a[i].quantity),l.push(a[i].name)):(o.push("รหัสสินค้า"),s.push(0));if(s[0]<=10)var r=5;else s[0]>10&&s[0]<=100?r=10:s[0]>100&&s[0]<=1e3&&(r=100);var n=parseInt(s[0]/10,10)+10;this.latestBarChart.options.scales.yAxes[0].ticks.stepSize=r,this.latestBarChart.options.scales.yAxes[0].ticks.max=n,this.latestBarChart.data.labels=o,this.latestBarChart.data.fullname=l,this.latestBarChart.data.datasets[0].data=s,this.latestBarChart.data.datasets[0].backgroundColor=h.successColorShade,this.loading=!1}).catch(t=>{console.log(t),this.loading=!1})},selectMonth(t){this.monthSelect=t,this.nextMonthSelect=r()(t).add(1,"month").format("YYYY-MM"),this.loadBestSale()}}},p=u,f=(a("9832"),a("2877")),m=Object(f["a"])(p,o,s,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-24350566.c2390919.js.map